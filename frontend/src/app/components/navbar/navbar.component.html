<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-logo">
      <a routerLink="/" (click)="closeMenus()">
        <span class="logo-icon"></span>
        <span class="logo-text">EnviosDS</span>
      </a>
    </div>

    <!-- Menu Toggle (Mobile) -->
    <button class="menu-toggle" (click)="toggleMenu()" [class.active]="isMenuOpen">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Navigation Menu -->
    <ul class="navbar-menu" [class.active]="isMenuOpen">
      <li class="navbar-item">
        <a routerLink="/" class="navbar-link" (click)="closeMenus()" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
          <span class="nav-icon"></span>
          Inicio
        </a>
      </li>
      <li class="navbar-item">
        <a routerLink="/cotizar" class="navbar-link" (click)="closeMenus()" routerLinkActive="active">
          <span class="nav-icon"></span>
          Cotizar
        </a>
      </li>
      
      <li class="navbar-item">
        <a routerLink="/crear-envio" class="navbar-link" (click)="closeMenus()" routerLinkActive="active">
          <span class="nav-icon"></span>
          Crear Envío
        </a>
      </li>
      
      <li class="navbar-item">
        <a routerLink="/envios" class="navbar-link" (click)="closeMenus()" routerLinkActive="active">
          <span class="nav-icon"></span>
          Envíos
        </a>
      </li>
      
      <li class="navbar-item">
        <a routerLink="/rastreo" class="navbar-link" (click)="closeMenus()" routerLinkActive="active">
          <span class="nav-icon"></span>
          Rastreo
        </a>
      </li>
      <li class="navbar-item">
        <a routerLink="/contacto" class="navbar-link" (click)="closeMenus()" routerLinkActive="active">
          <span class="nav-icon"></span>
          Contacto
        </a>
      </li>
      <li class="navbar-item">
        <a routerLink="/db-panel" class="navbar-link" (click)="closeMenus()" routerLinkActive="active">
          <span class="nav-icon"></span>
          Base de Datos
        </a>
      </li>
    </ul>

    <!-- User Section -->
    <div class="user-section">
      
      <!-- Usuario no autenticado -->
      <div class="auth-buttons" *ngIf="!isAuthenticated">
        <button class="login-btn" (click)="goToLogin()">
          <span class="btn-icon"></span>
          Iniciar Sesión
        </button>
      </div>

      <!-- Usuario autenticado -->
      <div class="user-menu-container" *ngIf="isAuthenticated && currentUser">
        
        <!-- Avatar y nombre -->
        <button class="user-button" (click)="toggleUserMenu()">
          <div class="user-avatar">
            {{ getUserInitials(currentUser.name) }}
          </div>
          <div class="user-info">
            <div class="user-name">{{ currentUser.name }}</div>
            <div class="user-role">{{ getRoleName(currentUser.role) }}</div>
          </div>
          <span class="dropdown-arrow" [class.open]="isUserMenuOpen"></span>
        </button>

        <!-- Menú desplegable del usuario -->
        <div class="user-dropdown" [class.active]="isUserMenuOpen">
          
          <div class="dropdown-header">
            <div class="dropdown-avatar">
              {{ getUserInitials(currentUser.name) }}
            </div>
            <div class="dropdown-info">
              <div class="dropdown-name">{{ currentUser.name }}</div>
              <div class="dropdown-email">{{ currentUser.email }}</div>
              <div class="dropdown-role">{{ getRoleName(currentUser.role) }}</div>
            </div>
          </div>

          <div class="dropdown-divider"></div>

          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="goToAdmin()">
              <span class="item-icon"></span>
              <div class="item-content">
                <div class="item-title">Panel de Admin</div>
                <div class="item-description">Administrar sistema</div>
              </div>
            </button>

            <button class="dropdown-item" (click)="logout()">
              <span class="item-icon"></span>
              <div class="item-content">
                <div class="item-title">Cerrar Sesión</div>
                <div class="item-description">Salir del sistema</div>
              </div>
            </button>
          </div>

        </div>
      </div>

    </div>

  </div>

  <!-- Overlay para cerrar menús -->
  <div class="menu-overlay" 
       *ngIf="isMenuOpen || isUserMenuOpen" 
       (click)="closeMenus()">
  </div>
</nav>