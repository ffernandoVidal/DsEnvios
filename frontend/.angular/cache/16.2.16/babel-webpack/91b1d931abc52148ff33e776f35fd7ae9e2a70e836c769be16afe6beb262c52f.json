{"ast":null,"code":"import { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"span\", 27);\n    i0.ɵɵtext(2, \"\\u26A0\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 28);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\nfunction LoginComponent_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵelement(1, \"span\", 30);\n    i0.ɵɵtext(2, \" Iniciar Sesi\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵelement(1, \"span\", 32);\n    i0.ɵɵtext(2, \" Verificando... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"h4\");\n    i0.ɵɵtext(2, \"Credenciales de Prueba:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 34)(4, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_29_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.fillDemoCredentials(\"admin\"));\n    });\n    i0.ɵɵtext(5, \" Admin \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_29_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.fillDemoCredentials(\"user\"));\n    });\n    i0.ɵɵtext(7, \" Usuario \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"p\", 37);\n    i0.ɵɵtext(9, \" Haz clic en cualquier bot\\u00F3n para llenar autom\\u00E1ticamente las credenciales \");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.subscription = new Subscription();\n      this.loginForm = {\n        username: '',\n        password: ''\n      };\n      // Estados del formulario\n      this.isLoading = false;\n      this.errorMessage = '';\n      this.showPassword = false;\n    }\n    ngOnInit() {\n      // Si ya está autenticado, redirigir al admin\n      if (this.authService.isAuthenticated()) {\n        this.router.navigate(['/admin']);\n      }\n    }\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n    onSubmit() {\n      // Limpiar errores previos\n      this.errorMessage = '';\n      // Validaciones básicas\n      if (!this.loginForm.username || !this.loginForm.password) {\n        this.errorMessage = 'Por favor completa todos los campos';\n        return;\n      }\n      if (this.loginForm.username.length < 3) {\n        this.errorMessage = 'El usuario debe tener al menos 3 caracteres';\n        return;\n      }\n      if (this.loginForm.password.length < 6) {\n        this.errorMessage = 'La contraseña debe tener al menos 6 caracteres';\n        return;\n      }\n      // Iniciar proceso de login\n      this.isLoading = true;\n      this.subscription.add(this.authService.login(this.loginForm.username, this.loginForm.password).subscribe({\n        next: response => {\n          console.log('✅ Login exitoso:', response);\n          this.isLoading = false;\n          if (response.success) {\n            // Redirigir al admin\n            this.router.navigate(['/admin']);\n          } else {\n            this.errorMessage = response.message || 'Error de autenticación';\n          }\n        },\n        error: error => {\n          console.error('❌ Error en login:', error);\n          this.isLoading = false;\n          if (error.status === 401) {\n            this.errorMessage = 'Usuario o contraseña incorrectos';\n          } else if (error.status === 0) {\n            this.errorMessage = 'Error de conexión con el servidor';\n          } else {\n            this.errorMessage = error.error?.message || 'Error interno del servidor';\n          }\n        }\n      }));\n    }\n    togglePasswordVisibility() {\n      this.showPassword = !this.showPassword;\n    }\n    onUsernameChange(event) {\n      this.loginForm.username = event.target.value.trim();\n      this.clearError();\n    }\n    onPasswordChange(event) {\n      this.loginForm.password = event.target.value;\n      this.clearError();\n    }\n    clearError() {\n      if (this.errorMessage) {\n        this.errorMessage = '';\n      }\n    }\n    // Método para demo/testing (remover en producción)\n    fillDemoCredentials(role) {\n      switch (role) {\n        case 'admin':\n          this.loginForm.username = 'admin';\n          this.loginForm.password = 'admin123';\n          break;\n        case 'user':\n          this.loginForm.username = 'usuario1';\n          this.loginForm.password = '123456';\n          break;\n        case 'operator':\n          this.loginForm.username = 'operador';\n          this.loginForm.password = 'operador123';\n          break;\n      }\n    }\n    static {\n      this.ɵfac = function LoginComponent_Factory(t) {\n        return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginComponent,\n        selectors: [[\"app-login\"]],\n        decls: 36,\n        vars: 14,\n        consts: [[1, \"login-container\"], [1, \"login-card\"], [1, \"login-header\"], [1, \"logo-section\"], [1, \"app-title\"], [1, \"app-subtitle\"], [1, \"login-form\", 3, \"ngSubmit\"], [\"loginFormRef\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"username\", 1, \"form-label\"], [1, \"label-icon\"], [1, \"input-wrapper\"], [\"type\", \"text\", \"id\", \"username\", \"name\", \"username\", \"placeholder\", \"Ingresa tu usuario\", \"autocomplete\", \"username\", \"required\", \"\", 1, \"form-input\", 3, \"value\", \"disabled\", \"input\"], [1, \"input-icon\"], [\"for\", \"password\", 1, \"form-label\"], [\"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Ingresa tu contrase\\u00F1a\", \"autocomplete\", \"current-password\", \"required\", \"\", 1, \"form-input\", 3, \"type\", \"value\", \"disabled\", \"input\"], [\"type\", \"button\", 1, \"password-toggle\", 3, \"disabled\", \"click\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"login-btn\", 3, \"disabled\"], [\"class\", \"btn-content\", 4, \"ngIf\"], [\"class\", \"btn-content loading-content\", 4, \"ngIf\"], [\"class\", \"demo-section\", 4, \"ngIf\"], [1, \"login-footer\"], [1, \"footer-text\"], [1, \"footer-icon\"], [1, \"copyright\"], [1, \"error-message\"], [1, \"error-icon\"], [1, \"error-text\"], [1, \"btn-content\"], [1, \"btn-icon\"], [1, \"btn-content\", \"loading-content\"], [1, \"spinner\"], [1, \"demo-section\"], [1, \"demo-buttons\"], [1, \"demo-btn\", \"admin\", 3, \"click\"], [1, \"demo-btn\", \"user\", 3, \"click\"], [1, \"demo-note\"]],\n        template: function LoginComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4);\n            i0.ɵɵtext(5, \"\\uD83D\\uDCE6 EnviosDS\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"p\", 5);\n            i0.ɵɵtext(7, \"Panel de Administraci\\u00F3n\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(8, \"form\", 6, 7);\n            i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_8_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(10, \"div\", 8)(11, \"label\", 9);\n            i0.ɵɵelement(12, \"span\", 10);\n            i0.ɵɵtext(13, \" Usuario \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"div\", 11)(15, \"input\", 12);\n            i0.ɵɵlistener(\"input\", function LoginComponent_Template_input_input_15_listener($event) {\n              return ctx.onUsernameChange($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(16, \"span\", 13);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"div\", 8)(18, \"label\", 14);\n            i0.ɵɵelement(19, \"span\", 10);\n            i0.ɵɵtext(20, \" Contrase\\u00F1a \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"div\", 11)(22, \"input\", 15);\n            i0.ɵɵlistener(\"input\", function LoginComponent_Template_input_input_22_listener($event) {\n              return ctx.onPasswordChange($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"button\", 16);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_23_listener() {\n              return ctx.togglePasswordVisibility();\n            });\n            i0.ɵɵtext(24);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(25, LoginComponent_div_25_Template, 5, 1, \"div\", 17);\n            i0.ɵɵelementStart(26, \"button\", 18);\n            i0.ɵɵtemplate(27, LoginComponent_span_27_Template, 3, 0, \"span\", 19);\n            i0.ɵɵtemplate(28, LoginComponent_span_28_Template, 3, 0, \"span\", 20);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(29, LoginComponent_div_29_Template, 10, 0, \"div\", 21);\n            i0.ɵɵelementStart(30, \"div\", 22)(31, \"p\", 23);\n            i0.ɵɵelement(32, \"span\", 24);\n            i0.ɵɵtext(33, \" Acceso seguro al sistema de env\\u00EDos \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"p\", 25);\n            i0.ɵɵtext(35, \" \\u00A9 2025 EnviosDS - Todos los derechos reservados \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(15);\n            i0.ɵɵproperty(\"value\", ctx.loginForm.username)(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"type\", ctx.showPassword ? \"text\" : \"password\")(\"value\", ctx.loginForm.password)(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵtextInterpolate1(\" \", ctx.showPassword ? \"\\uD83D\\uDC41\\uFE0F\" : \"\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8\\uFE0F\", \" \");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n            i0.ɵɵadvance(1);\n            i0.ɵɵclassProp(\"loading\", ctx.isLoading);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading || !ctx.loginForm.username || !ctx.loginForm.password);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n          }\n        },\n        dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm],\n        styles: [\".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:2rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.login-card[_ngcontent-%COMP%]{background:white;border-radius:20px;box-shadow:0 20px 60px #0003;padding:0;width:100%;max-width:420px;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .6s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);padding:2rem;text-align:center;color:#fff}.app-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0 0 .5rem;text-shadow:2px 2px 4px rgba(0,0,0,.2)}.app-subtitle[_ngcontent-%COMP%]{font-size:1rem;margin:0;opacity:.9}.login-form[_ngcontent-%COMP%]{padding:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:#333;margin-bottom:.5rem;font-size:.9rem}.label-icon[_ngcontent-%COMP%]{font-size:1rem}.input-wrapper[_ngcontent-%COMP%]{position:relative}.form-input[_ngcontent-%COMP%]{width:100%;padding:1rem 1rem 1rem 3rem;border:2px solid #e0e6ed;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#f8f9fb;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4facfe;background:white;box-shadow:0 0 0 3px #4facfe1a}.form-input[_ngcontent-%COMP%]:disabled{background:#f0f0f0;color:#999;cursor:not-allowed}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#666;font-size:1.1rem}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:1.2rem;color:#666;transition:color .2s ease}.password-toggle[_ngcontent-%COMP%]:hover{color:#4facfe}.password-toggle[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#ffebee;border:1px solid #ffcdd2;border-radius:8px;padding:.75rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_shake .5s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,20%,40%,60%,80%{transform:translate(0)}10%,30%,50%,70%{transform:translate(-3px)}}.error-icon[_ngcontent-%COMP%]{font-size:1.1rem;flex-shrink:0}.error-text[_ngcontent-%COMP%]{color:#d32f2f;font-size:.9rem;font-weight:500}.login-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);border:none;border-radius:12px;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-bottom:1.5rem}.login-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #4facfe66}.login-btn[_ngcontent-%COMP%]:disabled{background:#e0e6ed;cursor:not-allowed;transform:none;box-shadow:none}.btn-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.loading-content[_ngcontent-%COMP%]{opacity:.8}.spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.demo-section[_ngcontent-%COMP%]{border-top:1px solid #e0e6ed;padding:1.5rem 2rem;background:#f8f9fb}.demo-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#666;font-size:.9rem;text-align:center}.demo-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem}.demo-btn[_ngcontent-%COMP%]{flex:1;padding:.5rem;border:1px solid #ddd;border-radius:8px;background:white;cursor:pointer;font-size:.8rem;transition:all .2s ease}.demo-btn.admin[_ngcontent-%COMP%]{border-color:#ff9800;color:#ff9800}.demo-btn.admin[_ngcontent-%COMP%]:hover{background:#ff9800;color:#fff}.demo-btn.user[_ngcontent-%COMP%]{border-color:#2196f3;color:#2196f3}.demo-btn.user[_ngcontent-%COMP%]:hover{background:#2196f3;color:#fff}.demo-btn.operator[_ngcontent-%COMP%]{border-color:#4caf50;color:#4caf50}.demo-btn.operator[_ngcontent-%COMP%]:hover{background:#4caf50;color:#fff}.demo-note[_ngcontent-%COMP%]{font-size:.8rem;color:#999;text-align:center;margin:0;font-style:italic}.login-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;text-align:center;border-top:1px solid #e0e6ed;background:#f8f9fb}.footer-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin:0 0 .5rem;color:#666;font-size:.9rem}.footer-icon[_ngcontent-%COMP%]{font-size:1rem}.copyright[_ngcontent-%COMP%]{margin:0;color:#999;font-size:.8rem}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-card[_ngcontent-%COMP%]{max-width:100%}.login-header[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]{padding:1.5rem}.demo-section[_ngcontent-%COMP%]{padding:1rem 1.5rem}.app-title[_ngcontent-%COMP%]{font-size:1.5rem}.demo-buttons[_ngcontent-%COMP%]{flex-direction:column}}.form-input.error[_ngcontent-%COMP%]{border-color:#f44336;background:#ffebee}.form-input.success[_ngcontent-%COMP%]{border-color:#4caf50;background:#e8f5e8}.login-btn.loading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ccc 0%,#999 100%)}.login-btn.loading[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{opacity:.7}\"]\n      });\n    }\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}